<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Product</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha384-LCgZBx5WVhZq7ufn7Zz7Ov9CVnPLCVPVJ3IXuFq2om0MwBnZLbBfr3pmk+Utcfu6" crossorigin="anonymous">
  </head>

<body>

  <!-- Nav Bar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="product.html">Product Listing</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="image.html">Image Gallery</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="FAQ.html">FAQ</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownExperience" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              Contact
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdownExperience">
              <li><a class="dropdown-item" href="contact.html">Find Contact</a></li>
              <li><a class="dropdown-item" href="contact.html">Leave Contact</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

<body>
    <h3 class="mb-0">Refresh to input products again</h3>
    <div class="container mt-5">
        <div id="productsContainer">
            <!-- Initial product field -->
            <div class="product-field" id="product1">
                <hr>
                <div class="form-group">
                    <label for="product1Type">Product:</label>
                    <select id="product1Type" class="form-control">
                        <option value="keychain">Keychain</option>
                        <option value="stickerSheet">Sticker Sheet</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="product1Quantity">Quantity:</label>
                    <input type="number" id="product1Quantity" class="form-control" min="1" value="1">
                </div>

                <div id="product1KeychainOptions" class="form-group">
                    <label for="keychainChoice">Keychain Choice:</label>
                    <select id="keychainChoice" class="form-control">
                        <option value="danHeng">Dan Heng</option>
                        <option value="stelle">Stelle</option>
                        <option value="march7th">March 7th</option>
                        <option value="himeko">Himeko</option>
                        <option value="gepard">Gepard</option>
                    </select>

                    <label for="claspUpgrade">Clasp Upgrade:</label>
                    <select id="claspUpgrade" class="form-control">
                        <option value="none">None</option>
                        <option value="star">Star Clasp (+5k)</option>
                        <option value="resin">Resin Clasp (+20k)</option>
                    </select>
                </div>

                <div id="product1StickerSheetOptions" class="form-group">
                    <label for="stickerChoice">Sticker Choice:</label>
                    <select id="stickerChoice" class="form-control">
                        <option value="blueLock">Blue Lock</option>
                        <option value="genshin">Genshin</option>
                        <option value="starRail">Star Rail</option>
                    </select>

                    <label for="finishUpgrade">Finish Upgrade:</label>
                    <select id="finishUpgrade" class="form-control">
                        <option value="none">None</option>
                        <option value="glitter">Glitter Finish (+10k)</option>
                        <option value="holo">Holographic Finish (+10k)</option>
                    </select>
                </div>
            </div>
        </div>

        <button id="addProductBtn" class="btn btn-primary mt-3">Add Product</button>

        <h2>Total Price: Rp<span id="totalPrice">0</span></h2>
    </div>

<!-- Footer Section -->
<footer class="bg-dark text-white py-1">
    <div class="container">
      <h3 class="mb-0">Question? Don't ask <a href="https://forms.office.com/Pages/ResponsePage.aspx?id=Y7mFNLqCb0qBD7XMIm_4mKEVyYTu_dFGrRw8zrATAmZUNUtSWkdZSzVVUUlDSzI0RE41N0c1U0g0Ri4u">here</a>, you are welcome.</h3>
    </div>
  </footer>

  <!-- Include jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <!-- Include Popper.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"
    integrity="sha384-MCw98/SFnGE8fJT3WNAvfBk4a+EE5gAepYXbz2J6ndu6sI7f3UQ7twxu2IqDdYfJ" crossorigin="anonymous"></script>
  <!-- Include Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
  <!-- Your Custom JavaScript -->
  <script>
    $(document).ready(function () {
        updateOptions(); // Initial option setup
        calculateTotalPrice(); // Initial calculation on page load

        $('#addProductBtn').click(function () {
            addProduct();
            updateOptions(); // Update options after adding a new product
            calculateTotalPrice(); // Recalculate total price
        });

        $(document).on('change', '.product-field', function () {
            updateOptions();
            calculateTotalPrice();
        });
    });

    function addProduct() {
        var productFields = $('.product-field').length + 1;

        var productHtml = `
            <div class="product-field" id="product${productFields}">
                <hr>
                <div class="form-group">
                    <label for="product${productFields}Type">Product:</label>
                    <select id="product${productFields}Type" class="form-control">
                        <option value="keychain">Keychain</option>
                        <option value="stickerSheet">Sticker Sheet</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="product${productFields}Quantity">Quantity:</label>
                    <input type="number" id="product${productFields}Quantity" class="form-control" min="1" value="1">
                </div>

                <div id="product${productFields}KeychainOptions" class="form-group">
                    <label for="keychainChoice${productFields}">Keychain Choice:</label>
                    <select id="keychainChoice${productFields}" class="form-control">
                        <option value="danHeng">Dan Heng</option>
                        <option value="stelle">Stelle</option>
                        <option value="march7th">March 7th</option>
                        <option value="himeko">Himeko</option>
                        <option value="gepard">Gepard</option>
                    </select>

                    <label for="claspUpgrade${productFields}">Clasp Upgrade:</label>
                    <select id="claspUpgrade${productFields}" class="form-control">
                        <option value="none">None</option>
                        <option value="star">Star Clasp (+5k)</option>
                        <option value="resin">Resin Clasp (+20k)</option>
                    </select>
                </div>

                <div id="product${productFields}StickerSheetOptions" class="form-group">
                    <label for="stickerChoice${productFields}">Sticker Choice:</label>
                    <select id="stickerChoice${productFields}" class="form-control">
                        <option value="blueLock">Blue Lock</option>
                        <option value="genshin">Genshin</option>
                        <option value="starRail">Star Rail</option>
                    </select>

                    <label for="finishUpgrade${productFields}">Finish Upgrade:</label>
                    <select id="finishUpgrade${productFields}" class="form-control">
                        <option value="none">None</option>
                        <option value="glitter">Glitter Finish (+10k)</option>
                        <option value="holo">Holographic Finish (+10k)</option>
                    </select>
                </div>
            </div>
        `;

        $('#productsContainer').append(productHtml);
    }

    function updateOptions() {
        $('.product-field').each(function () {
            var selectedProduct = $(this).find('select').val();
            var productId = $(this).attr('id');

            $(`#${productId}KeychainOptions`).toggle(selectedProduct === 'keychain');
            $(`#${productId}StickerSheetOptions`).toggle(selectedProduct === 'stickerSheet');
        });
    }

    function calculateTotalPrice() {
        var totalPrice = 0;

        $('.product-field').each(function () {
            var quantity = parseInt($(this).find('input').val());
            var selectedProduct = $(this).find('select').val();
            var productId = $(this).attr('id');

            totalPrice += calculateProductPrice(selectedProduct, productId, quantity);
        });

        $('#totalPrice').text(totalPrice);
    }

    function calculateProductPrice(productType, productId, quantity) {
        // Base prices
        var baseKeychainPrice = 25000;
        var baseStickerSheetPrice = 20000;

        // Additional prices for keychain options
        var keychainOptionPrices = {
            danHeng: 0,
            stelle: 0,
            march7th: 0,
            himeko: 0,
            gepard: 0
        };

        // Additional prices for clasp upgrades
        var claspUpgradePrices = {
            none: 0,
            star: 5000,
            resin: 20000
        };

        // Additional prices for sticker sheet options
        var stickerSheetOptionPrices = {
            blueLock: 0,
            genshin: 0,
            starRail: 0
        };

        // Additional prices for finish upgrades
        var finishUpgradePrices = {
            none: 0,
            glitter: 10000,
            holo: 10000
        };

        // Get selected values
        var keychainChoice = $(`#${productId}KeychainOptions select`).val() || 'none';
        var claspUpgrade = $(`#${productId}KeychainOptions select[id^="claspUpgrade"]`).val() || 'none';
        var stickerChoice = $(`#${productId}StickerSheetOptions select`).val() || 'none';
        var finishUpgrade = $(`#${productId}StickerSheetOptions select[id^="finishUpgrade"]`).val() || 'none';

        // Calculate the total price based on the product type and options
        var totalPrice = 0;

        if (productType === 'keychain') {
            totalPrice = baseKeychainPrice +
                keychainOptionPrices[keychainChoice] +
                claspUpgradePrices[claspUpgrade];
        } else if (productType === 'stickerSheet') {
            totalPrice = baseStickerSheetPrice +
                stickerSheetOptionPrices[stickerChoice] +
                finishUpgradePrices[finishUpgrade];
        }

        // Multiply by quantity
        totalPrice *= quantity;

        return totalPrice;
    }
</script>

</body>

</html>